<html>
<head>
<title>index.html</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #d5b778;}
.s2 { color: #bababa;}
.s3 { color: #6aab73;}
.s4 { color: #7a7e85;}
.s5 { color: #56a8f5;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
index.html</font>
</center></td></tr></table>
<pre><span class="s0">{% extends 'base.html' %}</span>

<span class="s0">{% block content %}</span>
    <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;container mt-4&quot;</span><span class="s1">&gt;</span>
        <span class="s1">&lt;h1 </span><span class="s2">class</span><span class="s3">=&quot;text-center text-primary fw-bold&quot; </span><span class="s2">style</span><span class="s3">=&quot;font-family: 'Roboto', sans-serif; text-shadow: 1px 1px 2px rgba(0,0,0,0.2);&quot;</span><span class="s1">&gt;</span>
            <span class="s0">Technician Management</span>
        <span class="s1">&lt;/h1&gt;</span>

        <span class="s4">&lt;!-- Search &amp; Add Buttons --&gt;</span>
        <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;d-flex justify-content-between align-items-center mt-4&quot;</span><span class="s1">&gt;</span>
            <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;input-group&quot; </span><span class="s2">style</span><span class="s3">=&quot;max-width: 400px;&quot;</span><span class="s1">&gt;</span>
                <span class="s1">&lt;span </span><span class="s2">class</span><span class="s3">=&quot;input-group-text&quot;</span><span class="s1">&gt;&lt;i </span><span class="s2">class</span><span class="s3">=&quot;fas fa-search&quot;</span><span class="s1">&gt;&lt;/i&gt;&lt;/span&gt;</span>
                <span class="s1">&lt;input </span><span class="s2">type</span><span class="s3">=&quot;text&quot; </span><span class="s2">class</span><span class="s3">=&quot;form-control&quot; </span><span class="s2">placeholder</span><span class="s3">=&quot;Search technicians...&quot; </span><span class="s2">id</span><span class="s3">=&quot;searchTechnicians&quot;</span><span class="s1">&gt;</span>
            <span class="s1">&lt;/div&gt;</span>
            <span class="s1">&lt;div&gt;</span>
                <span class="s1">&lt;a </span><span class="s2">href</span><span class="s3">=&quot;{{ url_for('technicians.add_technician') }}&quot; </span><span class="s2">class</span><span class="s3">=&quot;btn btn-success me-2&quot;</span><span class="s1">&gt;</span>
                    <span class="s1">&lt;i </span><span class="s2">class</span><span class="s3">=&quot;fas fa-user-plus&quot;</span><span class="s1">&gt;&lt;/i&gt; </span><span class="s0">Add Technician</span>
                <span class="s1">&lt;/a&gt;</span>
                <span class="s1">&lt;a </span><span class="s2">href</span><span class="s3">=&quot;{{ url_for('technicians.import_technicians') }}&quot; </span><span class="s2">class</span><span class="s3">=&quot;btn btn-info&quot;</span><span class="s1">&gt;</span>
                    <span class="s1">&lt;i </span><span class="s2">class</span><span class="s3">=&quot;fas fa-file-import&quot;</span><span class="s1">&gt;&lt;/i&gt; </span><span class="s0">Import Technicians</span>
                <span class="s1">&lt;/a&gt;</span>
            <span class="s1">&lt;/div&gt;</span>
        <span class="s1">&lt;/div&gt;</span>

        <span class="s4">&lt;!-- Technician List Table --&gt;</span>
        <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;card mt-4 shadow-sm&quot;</span><span class="s1">&gt;</span>
            <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;card-body&quot;</span><span class="s1">&gt;</span>
                <span class="s1">&lt;table </span><span class="s2">class</span><span class="s3">=&quot;table table-hover table-striped align-middle&quot; </span><span class="s2">id</span><span class="s3">=&quot;technicianTable&quot;</span><span class="s1">&gt;</span>
                    <span class="s1">&lt;thead </span><span class="s2">class</span><span class="s3">=&quot;table-dark&quot;</span><span class="s1">&gt;</span>
                        <span class="s1">&lt;tr&gt;</span>
                            <span class="s1">&lt;th </span><span class="s2">onclick</span><span class="s3">=&quot;sortTable(0)&quot;</span><span class="s1">&gt;</span><span class="s0">Name </span><span class="s5">&amp;#x25B2;&amp;#x25BC;</span><span class="s1">&lt;/th&gt;</span>
                            <span class="s1">&lt;th </span><span class="s2">onclick</span><span class="s3">=&quot;sortTable(1)&quot;</span><span class="s1">&gt;</span><span class="s0">Status </span><span class="s5">&amp;#x25B2;&amp;#x25BC;</span><span class="s1">&lt;/th&gt;</span>
                            <span class="s1">&lt;th </span><span class="s2">onclick</span><span class="s3">=&quot;sortTable(2)&quot;</span><span class="s1">&gt;</span><span class="s0">Last Location </span><span class="s5">&amp;#x25B2;&amp;#x25BC;</span><span class="s1">&lt;/th&gt;</span>
                            <span class="s1">&lt;th </span><span class="s2">onclick</span><span class="s3">=&quot;sortTable(3)&quot;</span><span class="s1">&gt;</span><span class="s0">Calls Today </span><span class="s5">&amp;#x25B2;&amp;#x25BC;</span><span class="s1">&lt;/th&gt;</span>
                            <span class="s1">&lt;th </span><span class="s2">onclick</span><span class="s3">=&quot;sortTable(4)&quot;</span><span class="s1">&gt;</span><span class="s0">Availability </span><span class="s5">&amp;#x25B2;&amp;#x25BC;</span><span class="s1">&lt;/th&gt;</span>
                            <span class="s1">&lt;th&gt;</span><span class="s0">Actions</span><span class="s1">&lt;/th&gt;</span>
                        <span class="s1">&lt;/tr&gt;</span>
                    <span class="s1">&lt;/thead&gt;</span>
                    <span class="s1">&lt;tbody&gt;</span>
                        <span class="s0">{% for tech in technicians %}</span>
                        <span class="s1">&lt;tr&gt;</span>
                            <span class="s1">&lt;td&gt;</span><span class="s0">{{ tech.name }}</span><span class="s1">&lt;/td&gt;</span>
                            <span class="s1">&lt;td&gt;</span>
                                <span class="s1">&lt;span </span><span class="s2">class</span><span class="s3">=&quot;badge {{ 'bg-danger' if tech.status == 'Busy' else 'bg-success' }}&quot;</span><span class="s1">&gt;</span>
                                    <span class="s0">{{ tech.status }}</span>
                                <span class="s1">&lt;/span&gt;</span>
                            <span class="s1">&lt;/td&gt;</span>
                            <span class="s1">&lt;td&gt;</span><span class="s0">{{ tech.last_location }}</span><span class="s1">&lt;/td&gt;</span>
                            <span class="s1">&lt;td&gt;</span><span class="s0">{{ tech.calls_today }}</span><span class="s1">&lt;/td&gt;</span>
                            <span class="s1">&lt;td&gt;</span>
                                <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;progress&quot; </span><span class="s2">style</span><span class="s3">=&quot;height: 20px;&quot;</span><span class="s1">&gt;</span>
                                    <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;progress-bar {{ 'bg-danger' if tech.status == 'Busy' else 'bg-success' }}&quot;</span>
                                         <span class="s2">role</span><span class="s3">=&quot;progressbar&quot;</span>
                                         <span class="s2">style</span><span class="s3">=&quot;width: {{ tech.minutes_left }}%; transition: width 0.5s ease-in-out;&quot;</span><span class="s1">&gt;</span>
                                        <span class="s0">{{ tech.minutes_left }} min</span>
                                    <span class="s1">&lt;/div&gt;</span>
                                <span class="s1">&lt;/div&gt;</span>
                            <span class="s1">&lt;/td&gt;</span>
                            <span class="s1">&lt;td&gt;</span>
                                <span class="s1">&lt;a </span><span class="s2">href</span><span class="s3">=&quot;{{ url_for('technicians.edit_technician', tech_id=tech.id) }}&quot; </span><span class="s2">class</span><span class="s3">=&quot;btn btn-sm btn-warning&quot;</span><span class="s1">&gt;</span>
                                    <span class="s1">&lt;i </span><span class="s2">class</span><span class="s3">=&quot;fas fa-edit&quot;</span><span class="s1">&gt;&lt;/i&gt; </span><span class="s0">Edit</span>
                                <span class="s1">&lt;/a&gt;</span>
                                <span class="s1">&lt;form </span><span class="s2">method</span><span class="s3">=&quot;POST&quot; </span><span class="s2">action</span><span class="s3">=&quot;{{ url_for('technicians.delete_technician', tech_id=tech.id) }}&quot; </span><span class="s2">style</span><span class="s3">=&quot;display:inline;&quot;</span><span class="s1">&gt;</span>
                                    <span class="s1">&lt;button </span><span class="s2">type</span><span class="s3">=&quot;submit&quot; </span><span class="s2">class</span><span class="s3">=&quot;btn btn-sm btn-danger&quot; </span><span class="s2">onclick</span><span class="s3">=&quot;return confirm('Are you sure you want to delete this technician?');&quot;</span><span class="s1">&gt;</span>
                                        <span class="s1">&lt;i </span><span class="s2">class</span><span class="s3">=&quot;fas fa-trash&quot;</span><span class="s1">&gt;&lt;/i&gt; </span><span class="s0">Del</span>
                                    <span class="s1">&lt;/button&gt;</span>
                                <span class="s1">&lt;/form&gt;</span>
                            <span class="s1">&lt;/td&gt;</span>
                        <span class="s1">&lt;/tr&gt;</span>
                        <span class="s0">{% endfor %}</span>
                    <span class="s1">&lt;/tbody&gt;</span>
                <span class="s1">&lt;/table&gt;</span>
            <span class="s1">&lt;/div&gt;</span>
        <span class="s1">&lt;/div&gt;</span>
    <span class="s1">&lt;/div&gt;</span>

    <span class="s1">&lt;style&gt;</span>
        <span class="s0">.table th {</span>
            <span class="s0">text-align: center;</span>
            <span class="s0">cursor: pointer;</span>
        <span class="s0">}</span>
        <span class="s0">.table td {</span>
            <span class="s0">text-align: center;</span>
            <span class="s0">font-size: 12px;</span>
        <span class="s0">}</span>
        <span class="s0">.progress {</span>
            <span class="s0">background-color: #f1f1f1;</span>
            <span class="s0">border-radius: 5px;</span>
            <span class="s0">overflow: hidden;</span>
        <span class="s0">}</span>
        <span class="s0">.progress-bar {</span>
            <span class="s0">font-weight: bold;</span>
            <span class="s0">color: white;</span>
        <span class="s0">}</span>
        <span class="s0">.badge {</span>
            <span class="s0">font-size: 12px;</span>
            <span class="s0">padding: 8px 12px;</span>
        <span class="s0">}</span>
    <span class="s1">&lt;/style&gt;</span>

    <span class="s1">&lt;script&gt;</span>
        <span class="s0">// Search Function</span>
        <span class="s0">document.addEventListener(&quot;DOMContentLoaded&quot;, function () {</span>
            <span class="s0">let searchInput = document.getElementById(&quot;searchTechnicians&quot;);</span>
            <span class="s0">searchInput.addEventListener(&quot;keyup&quot;, function () {</span>
                <span class="s0">let filter = searchInput.value.toLowerCase();</span>
                <span class="s0">let rows = document.querySelectorAll(&quot;#technicianTable tbody tr&quot;);</span>
                <span class="s0">rows.forEach(row =&gt; {</span>
                    <span class="s0">let nameCell = row.getElementsByTagName(&quot;td&quot;)[0];</span>
                    <span class="s0">if (nameCell) {</span>
                        <span class="s0">let textValue = nameCell.textContent || nameCell.innerText;</span>
                        <span class="s0">row.style.display = textValue.toLowerCase().includes(filter) ? &quot;&quot; : &quot;none&quot;;</span>
                    <span class="s0">}</span>
                <span class="s0">});</span>
            <span class="s0">});</span>
        <span class="s0">});</span>

        <span class="s0">// Sorting Function</span>
        <span class="s0">function sortTable(columnIndex) {</span>
            <span class="s0">let table = document.getElementById(&quot;technicianTable&quot;);</span>
            <span class="s0">let tbody = table.getElementsByTagName(&quot;tbody&quot;)[0];</span>
            <span class="s0">let rows = Array.from(tbody.getElementsByTagName(&quot;tr&quot;));</span>

            <span class="s0">let ascending = table.dataset.sortOrder !== &quot;asc&quot;;</span>
            <span class="s0">table.dataset.sortOrder = ascending ? &quot;asc&quot; : &quot;desc&quot;;</span>

            <span class="s0">rows.sort((a, b) =&gt; {</span>
                <span class="s0">let aText = a.getElementsByTagName(&quot;td&quot;)[columnIndex].textContent.trim();</span>
                <span class="s0">let bText = b.getElementsByTagName(&quot;td&quot;)[columnIndex].textContent.trim();</span>

                <span class="s0">// Handle numeric columns</span>
                <span class="s0">let aNum = parseFloat(aText);</span>
                <span class="s0">let bNum = parseFloat(bText);</span>

                <span class="s0">if (!isNaN(aNum) &amp;&amp; !isNaN(bNum)) {</span>
                    <span class="s0">return ascending ? aNum - bNum : bNum - aNum;</span>
                <span class="s0">}</span>

                <span class="s0">return ascending ? aText.localeCompare(bText) : bText.localeCompare(aText);</span>
            <span class="s0">});</span>

            <span class="s0">tbody.innerHTML = &quot;&quot;;</span>
            <span class="s0">rows.forEach(row =&gt; tbody.appendChild(row));</span>
        <span class="s0">}</span>
    <span class="s1">&lt;/script&gt;</span>

<span class="s0">{% endblock %}</span>
</pre>
</body>
</html>