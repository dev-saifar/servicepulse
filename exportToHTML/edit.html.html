<html>
<head>
<title>edit.html</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #d5b778;}
.s2 { color: #bababa;}
.s3 { color: #6aab73;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
edit.html</font>
</center></td></tr></table>
<pre><span class="s0">{% extends 'base.html' %}</span>
<span class="s0">{% block content %}</span>
<span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;container mt-4&quot;</span><span class="s1">&gt;</span>
    <span class="s1">&lt;h1 </span><span class="s2">class</span><span class="s3">=&quot;text-center text-primary fw-bold&quot;</span><span class="s1">&gt;</span><span class="s0">Edit Technician</span><span class="s1">&lt;/h1&gt;</span>
    <span class="s1">&lt;form </span><span class="s2">method</span><span class="s3">=&quot;POST&quot; </span><span class="s2">enctype</span><span class="s3">=&quot;multipart/form-data&quot;</span>
          <span class="s2">action</span><span class="s3">=&quot;{{ url_for('technicians.edit_technician', tech_id=technician.id) }}&quot;</span><span class="s1">&gt;</span>

        <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;row&quot;</span><span class="s1">&gt;</span>
            <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;col-md-6 mb-3&quot;</span><span class="s1">&gt;</span>
                <span class="s1">&lt;label </span><span class="s2">class</span><span class="s3">=&quot;form-label&quot;</span><span class="s1">&gt;</span><span class="s0">üë§ Name:</span><span class="s1">&lt;/label&gt;</span>
                <span class="s1">&lt;input </span><span class="s2">type</span><span class="s3">=&quot;text&quot; </span><span class="s2">class</span><span class="s3">=&quot;form-control&quot; </span><span class="s2">name</span><span class="s3">=&quot;name&quot; </span><span class="s2">value</span><span class="s3">=&quot;{{ technician.name }}&quot; </span><span class="s2">required</span><span class="s1">&gt;</span>
            <span class="s1">&lt;/div&gt;</span>
            <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;col-md-6 mb-3&quot;</span><span class="s1">&gt;</span>
                <span class="s1">&lt;label </span><span class="s2">class</span><span class="s3">=&quot;form-label&quot;</span><span class="s1">&gt;</span><span class="s0">üì± Mobile:</span><span class="s1">&lt;/label&gt;</span>
                <span class="s1">&lt;input </span><span class="s2">type</span><span class="s3">=&quot;text&quot; </span><span class="s2">class</span><span class="s3">=&quot;form-control&quot; </span><span class="s2">name</span><span class="s3">=&quot;mobile&quot; </span><span class="s2">value</span><span class="s3">=&quot;{{ technician.mobile }}&quot;</span><span class="s1">&gt;</span>
            <span class="s1">&lt;/div&gt;</span>
            <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;col-md-6 mb-3&quot;</span><span class="s1">&gt;</span>
                <span class="s1">&lt;label </span><span class="s2">class</span><span class="s3">=&quot;form-label&quot;</span><span class="s1">&gt;</span><span class="s0">üìß Email:</span><span class="s1">&lt;/label&gt;</span>
                <span class="s1">&lt;input </span><span class="s2">type</span><span class="s3">=&quot;email&quot; </span><span class="s2">class</span><span class="s3">=&quot;form-control&quot; </span><span class="s2">name</span><span class="s3">=&quot;email&quot; </span><span class="s2">value</span><span class="s3">=&quot;{{ technician.email }}&quot;</span><span class="s1">&gt;</span>
            <span class="s1">&lt;/div&gt;</span>
            <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;col-md-6 mb-3&quot;</span><span class="s1">&gt;</span>
                <span class="s1">&lt;label </span><span class="s2">class</span><span class="s3">=&quot;form-label&quot;</span><span class="s1">&gt;</span><span class="s0">üìÖ Date of Birth:</span><span class="s1">&lt;/label&gt;</span>
                <span class="s1">&lt;input </span><span class="s2">type</span><span class="s3">=&quot;date&quot; </span><span class="s2">class</span><span class="s3">=&quot;form-control&quot; </span><span class="s2">name</span><span class="s3">=&quot;dob&quot; </span><span class="s2">value</span><span class="s3">=&quot;{{ technician.dob.strftime('%Y-%m-%d') if technician.dob }}&quot;</span><span class="s1">&gt;</span>
            <span class="s1">&lt;/div&gt;</span>
            <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;col-md-6 mb-3&quot;</span><span class="s1">&gt;</span>
                <span class="s1">&lt;label </span><span class="s2">class</span><span class="s3">=&quot;form-label&quot;</span><span class="s1">&gt;</span><span class="s0">üîß Status:</span><span class="s1">&lt;/label&gt;</span>
                <span class="s1">&lt;select </span><span class="s2">class</span><span class="s3">=&quot;form-control&quot; </span><span class="s2">name</span><span class="s3">=&quot;status&quot;</span><span class="s1">&gt;</span>
                    <span class="s1">&lt;option </span><span class="s2">value</span><span class="s3">=&quot;Free&quot; </span><span class="s2">{% if technician.status </span><span class="s3">== </span><span class="s0">'Free' %}selected{% endif %}&gt;Free</span><span class="s1">&lt;/option&gt;</span>
                    <span class="s1">&lt;option </span><span class="s2">value</span><span class="s3">=&quot;Busy&quot; </span><span class="s2">{% if technician.status </span><span class="s3">== </span><span class="s0">'Busy' %}selected{% endif %}&gt;Busy</span><span class="s1">&lt;/option&gt;</span>
                <span class="s1">&lt;/select&gt;</span>
            <span class="s1">&lt;/div&gt;</span>

            <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;col-md-6 mb-3&quot;</span><span class="s1">&gt;</span>
                <span class="s1">&lt;label </span><span class="s2">class</span><span class="s3">=&quot;form-label&quot;</span><span class="s1">&gt;</span><span class="s0">üë™ Next of Kin Name and Phone Number:</span><span class="s1">&lt;/label&gt;</span>
                <span class="s1">&lt;input </span><span class="s2">type</span><span class="s3">=&quot;text&quot; </span><span class="s2">class</span><span class="s3">=&quot;form-control&quot; </span><span class="s2">name</span><span class="s3">=&quot;next_of_kin&quot; </span><span class="s2">value</span><span class="s3">=&quot;{{ technician.next_of_kin or '' }}&quot;</span><span class="s1">&gt;</span>
            <span class="s1">&lt;/div&gt;</span>
            <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;col-md-6 mb-3&quot;</span><span class="s1">&gt;</span>
                <span class="s1">&lt;label </span><span class="s2">class</span><span class="s3">=&quot;form-label&quot;</span><span class="s1">&gt;</span><span class="s0">üë§ Relation with Technician:</span><span class="s1">&lt;/label&gt;</span>
                <span class="s1">&lt;input </span><span class="s2">type</span><span class="s3">=&quot;text&quot; </span><span class="s2">class</span><span class="s3">=&quot;form-control&quot; </span><span class="s2">name</span><span class="s3">=&quot;kin_relation&quot; </span><span class="s2">value</span><span class="s3">=&quot;{{ technician.kin_relation or '' }}&quot;</span><span class="s1">&gt;</span>
            <span class="s1">&lt;/div&gt;</span>
        <span class="s1">&lt;/div&gt;</span>

        <span class="s1">&lt;hr&gt;</span>

        <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;mb-3&quot;</span><span class="s1">&gt;</span>
            <span class="s1">&lt;label </span><span class="s2">class</span><span class="s3">=&quot;form-label&quot;</span><span class="s1">&gt;</span><span class="s0">üñºÔ∏è Profile Photo:</span><span class="s1">&lt;/label&gt;&lt;br&gt;</span>
            <span class="s0">{% if technician.photo_url %}</span>
                <span class="s1">&lt;img </span><span class="s2">id</span><span class="s3">=&quot;photoPreview&quot; </span><span class="s2">src</span><span class="s3">=&quot;{{ technician.photo_url }}&quot;</span>
            <span class="s2">{% else %}</span>
                <span class="s1">&lt;img </span><span class="s2">id</span><span class="s3">=&quot;photoPreview&quot; </span><span class="s2">src</span><span class="s3">=&quot;/static/default-user.png&quot;</span>
            <span class="s2">{% endif %}</span>
            <span class="s2">class</span><span class="s3">=&quot;rounded shadow-sm mb-2&quot; </span><span class="s2">style</span><span class="s3">=&quot;width: 120px; height: 120px; object-fit: cover;&quot;</span><span class="s1">&gt;</span>

            <span class="s1">&lt;input </span><span class="s2">type</span><span class="s3">=&quot;file&quot; </span><span class="s2">class</span><span class="s3">=&quot;form-control&quot; </span><span class="s2">name</span><span class="s3">=&quot;photo&quot; </span><span class="s2">accept</span><span class="s3">=&quot;image/*&quot; </span><span class="s2">onchange</span><span class="s3">=&quot;previewPhoto(event)&quot;</span><span class="s1">&gt;</span>
            <span class="s0">{% if technician.photo_url %}</span>
                <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;mt-2 d-flex gap-2&quot;</span><span class="s1">&gt;</span>
                    <span class="s1">&lt;a </span><span class="s2">href</span><span class="s3">=&quot;{{ technician.photo_url }}&quot; </span><span class="s2">target</span><span class="s3">=&quot;_blank&quot; </span><span class="s2">class</span><span class="s3">=&quot;btn btn-sm btn-outline-primary&quot;</span><span class="s1">&gt;</span><span class="s0">üîç View Photo</span><span class="s1">&lt;/a&gt;</span>
                    <span class="s1">&lt;button </span><span class="s2">type</span><span class="s3">=&quot;button&quot; </span><span class="s2">class</span><span class="s3">=&quot;btn btn-sm btn-outline-danger&quot; </span><span class="s2">id</span><span class="s3">=&quot;deletePhotoButton&quot; </span><span class="s2">onclick</span><span class="s3">=&quot;confirmDeletePhoto()&quot;</span><span class="s1">&gt;</span><span class="s0">üóëÔ∏è Delete</span><span class="s1">&lt;/button&gt;</span>
                    <span class="s1">&lt;input </span><span class="s2">type</span><span class="s3">=&quot;hidden&quot; </span><span class="s2">name</span><span class="s3">=&quot;delete_photo&quot; </span><span class="s2">id</span><span class="s3">=&quot;deletePhotoHiddenInput&quot; </span><span class="s2">value</span><span class="s3">=&quot;0&quot;</span><span class="s1">&gt;</span>
                <span class="s1">&lt;/div&gt;</span>
            <span class="s0">{% endif %}</span>
        <span class="s1">&lt;/div&gt;</span>

        <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;mb-3&quot;</span><span class="s1">&gt;</span>
            <span class="s1">&lt;label </span><span class="s2">class</span><span class="s3">=&quot;form-label&quot;</span><span class="s1">&gt;</span><span class="s0">üÜî ID Proof (PDF/JPG):</span><span class="s1">&lt;/label&gt;</span>
            <span class="s1">&lt;input </span><span class="s2">type</span><span class="s3">=&quot;file&quot; </span><span class="s2">class</span><span class="s3">=&quot;form-control&quot; </span><span class="s2">name</span><span class="s3">=&quot;id_card&quot; </span><span class="s2">accept</span><span class="s3">=&quot;.pdf,image/*&quot;</span><span class="s1">&gt;</span>
            <span class="s0">{% if technician.id_card_url %}</span>
                <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;mt-2 d-flex gap-2&quot;</span><span class="s1">&gt;</span>
                    <span class="s1">&lt;a </span><span class="s2">href</span><span class="s3">=&quot;{{ technician.id_card_url }}&quot; </span><span class="s2">target</span><span class="s3">=&quot;_blank&quot; </span><span class="s2">class</span><span class="s3">=&quot;btn btn-sm btn-outline-primary&quot;</span><span class="s1">&gt;</span><span class="s0">üîé View ID</span><span class="s1">&lt;/a&gt;</span>
                    <span class="s1">&lt;form </span><span class="s2">method</span><span class="s3">=&quot;POST&quot; </span><span class="s2">action</span><span class="s3">=&quot;{{ url_for('technicians.remove_id', tech_id=technician.id) }}&quot;</span><span class="s1">&gt;</span>
                        <span class="s1">&lt;button </span><span class="s2">class</span><span class="s3">=&quot;btn btn-sm btn-outline-danger&quot; </span><span class="s2">onclick</span><span class="s3">=&quot;return confirm('Delete ID Proof?')&quot;</span><span class="s1">&gt;</span><span class="s0">üóëÔ∏è Delete</span><span class="s1">&lt;/button&gt;</span>
                    <span class="s1">&lt;/form&gt;</span>
                <span class="s1">&lt;/div&gt;</span>
            <span class="s0">{% endif %}</span>
        <span class="s1">&lt;/div&gt;</span>

        <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;mb-3&quot;</span><span class="s1">&gt;</span>
            <span class="s1">&lt;label </span><span class="s2">class</span><span class="s3">=&quot;form-label&quot;</span><span class="s1">&gt;</span><span class="s0">üìÑ CV (PDF):</span><span class="s1">&lt;/label&gt;</span>
            <span class="s1">&lt;input </span><span class="s2">type</span><span class="s3">=&quot;file&quot; </span><span class="s2">class</span><span class="s3">=&quot;form-control&quot; </span><span class="s2">name</span><span class="s3">=&quot;cv&quot; </span><span class="s2">accept</span><span class="s3">=&quot;.pdf&quot;</span><span class="s1">&gt;</span>
            <span class="s0">{% if technician.cv_url %}</span>
                <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;mt-2 d-flex gap-2&quot;</span><span class="s1">&gt;</span>
                    <span class="s1">&lt;a </span><span class="s2">href</span><span class="s3">=&quot;{{ technician.cv_url }}&quot; </span><span class="s2">target</span><span class="s3">=&quot;_blank&quot; </span><span class="s2">class</span><span class="s3">=&quot;btn btn-sm btn-outline-secondary&quot;</span><span class="s1">&gt;</span><span class="s0">üì• View CV</span><span class="s1">&lt;/a&gt;</span>
                    <span class="s1">&lt;form </span><span class="s2">method</span><span class="s3">=&quot;POST&quot; </span><span class="s2">action</span><span class="s3">=&quot;{{ url_for('technicians.remove_cv', tech_id=technician.id) }}&quot;</span><span class="s1">&gt;</span>
                        <span class="s1">&lt;button </span><span class="s2">class</span><span class="s3">=&quot;btn btn-sm btn-outline-danger&quot; </span><span class="s2">onclick</span><span class="s3">=&quot;return confirm('Delete CV?')&quot;</span><span class="s1">&gt;</span><span class="s0">üóëÔ∏è Delete</span><span class="s1">&lt;/button&gt;</span>
                    <span class="s1">&lt;/form&gt;</span>
                <span class="s1">&lt;/div&gt;</span>
            <span class="s0">{% endif %}</span>
        <span class="s1">&lt;/div&gt;</span>

        <span class="s1">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;d-flex justify-content-between mt-4&quot;</span><span class="s1">&gt;</span>
            <span class="s1">&lt;button </span><span class="s2">type</span><span class="s3">=&quot;submit&quot; </span><span class="s2">class</span><span class="s3">=&quot;btn btn-success&quot;</span><span class="s1">&gt;</span><span class="s0">üíæ Save Changes</span><span class="s1">&lt;/button&gt;</span>
            <span class="s1">&lt;a </span><span class="s2">href</span><span class="s3">=&quot;{{ url_for('technicians.index') }}&quot; </span><span class="s2">class</span><span class="s3">=&quot;btn btn-secondary&quot;</span><span class="s1">&gt;</span><span class="s0">‚¨Ö Cancel</span><span class="s1">&lt;/a&gt;</span>
        <span class="s1">&lt;/div&gt;</span>
    <span class="s1">&lt;/form&gt;</span>
<span class="s1">&lt;/div&gt;</span>

<span class="s1">&lt;script&gt;</span>
<span class="s0">function previewPhoto(event) {</span>
    <span class="s0">const reader = new FileReader();</span>
    <span class="s0">reader.onload = function () {</span>
        <span class="s0">document.getElementById('photoPreview').src = reader.result;</span>
        <span class="s0">// If a new photo is selected, ensure the delete flag is reset</span>
        <span class="s0">document.getElementById('deletePhotoHiddenInput').value = '0';</span>
        <span class="s0">// Hide the delete button if a new photo is being uploaded</span>
        <span class="s0">const deletePhotoButton = document.getElementById('deletePhotoButton');</span>
        <span class="s0">if (deletePhotoButton) {</span>
            <span class="s0">deletePhotoButton.style.display = 'none';</span>
        <span class="s0">}</span>
    <span class="s0">};</span>
    <span class="s0">reader.readAsDataURL(event.target.files[0]);</span>
<span class="s0">}</span>

<span class="s0">function confirmDeletePhoto() {</span>
    <span class="s0">if (confirm('Are you sure you want to delete this profile photo? It will be removed when you save changes.')) {</span>
        <span class="s0">document.getElementById('photoPreview').src = '/static/default-user.png';</span>
        <span class="s0">document.getElementById('deletePhotoHiddenInput').value = '1';</span>
        <span class="s0">// Hide the delete button</span>
        <span class="s0">const deletePhotoButton = document.getElementById('deletePhotoButton');</span>
        <span class="s0">if (deletePhotoButton) {</span>
            <span class="s0">deletePhotoButton.style.display = 'none';</span>
        <span class="s0">}</span>
    <span class="s0">}</span>
<span class="s0">}</span>
<span class="s1">&lt;/script&gt;</span>
<span class="s0">{% endblock %}</span></pre>
</body>
</html>